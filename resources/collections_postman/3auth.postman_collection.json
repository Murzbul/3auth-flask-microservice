{
	"info": {
		"_postman_id": "4ce2a739-d65e-4ac2-babf-9c9caed185e9",
		"name": "3auth",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Session",
			"item": [
				{
					"name": "Authenticate",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c864e2b4-29d4-432b-8734-56b8ae38550a",
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"Response has token\"] = _.has(jsonData.data, 'access_token');",
									"tests[\"Response has email\"] = _.has(jsonData.data, 'email');",
									"",
									"pm.globals.set(\"UserToken\", jsonData.data.access_token);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"email\": \"nathan@nathan.com\",\n\t\"password\": \"1234\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/session",
							"host": [
								"{{URL}}"
							],
							"path": [
								"session"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "User",
			"item": [
				{
					"name": "Add user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "98e847b3-c7b2-46d9-b8d3-b7ac214a5a2c",
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"Response has token\"] = _.has(jsonData.data, 'access_token');",
									"tests[\"Response has email\"] = _.has(jsonData.data, 'email');",
									"",
									"pm.globals.set(\"ID\", jsonData.data.id);"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"email\": \"nathaddn@nathan.com\",\n\t\"password\": \"1234\",\n\t\"first_name\": \"Nathan\",\n\t\"last_name\": \"Russo\",\n\t\"phone_number\": \"2234449955\",\n\t\"date_of_birth\": \"1990-01-01\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/user",
							"host": [
								"{{URL}}"
							],
							"path": [
								"user"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get user by id",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"email\": \"nathan@nathan.com\",\n\t\"password\": \"1234\",\n\t\"first_name\": \"Nathan\",\n\t\"last_name\": \"Russo\",\n\t\"phone_number\": \"2234449955\",\n\t\"date_of_birth\": \"1990-01-01\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/user/{{ID}}",
							"host": [
								"{{URL}}"
							],
							"path": [
								"user",
								"{{ID}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get all users",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"email\": \"nathan@nathan.com\",\n\t\"password\": \"1234\",\n\t\"first_name\": \"Nathan\",\n\t\"last_name\": \"Russo\",\n\t\"phone_number\": \"2234449955\",\n\t\"date_of_birth\": \"1990-01-01\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/users",
							"host": [
								"{{URL}}"
							],
							"path": [
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Modified user without password",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"first_name\": \"Nathan\",\n\t\"last_name\": \"Russo\",\n\t\"phone_number\": \"2234449955\",\n\t\"date_of_birth\": \"1990-01-01\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/user/{{ID}}",
							"host": [
								"{{URL}}"
							],
							"path": [
								"user",
								"{{ID}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Modified user with password",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"password\": \"1234\",\n\t\"new_password\": \"12345\",\n\t\"re_new_password\": \"12345\",\n\t\"first_name\": \"Nathan\",\n\t\"last_name\": \"Russo\",\n\t\"phone_number\": \"2234449955\",\n\t\"date_of_birth\": \"1990-01-01\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/user/{{ID}}",
							"host": [
								"{{URL}}"
							],
							"path": [
								"user",
								"{{ID}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete user",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{URL}}/user/{{ID}}",
							"host": [
								"{{URL}}"
							],
							"path": [
								"user",
								"{{ID}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Role",
			"item": [
				{
					"name": "Add role",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "98e847b3-c7b2-46d9-b8d3-b7ac214a5a2c",
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"Response has token\"] = _.has(jsonData.data, 'access_token');",
									"tests[\"Response has email\"] = _.has(jsonData.data, 'email');",
									"",
									"pm.globals.set(\"ID\", jsonData.data.id);"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"Gerente\",\n\t\"cannonical_name\": \"gerente\",\n\t\"description\": \"Descripcion 1\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/role",
							"host": [
								"{{URL}}"
							],
							"path": [
								"role"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get role by id",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"email\": \"nathan@nathan.com\",\n\t\"password\": \"1234\",\n\t\"first_name\": \"Nathan\",\n\t\"last_name\": \"Russo\",\n\t\"phone_number\": \"2234449955\",\n\t\"date_of_birth\": \"1990-01-01\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/role/{{ID}}",
							"host": [
								"{{URL}}"
							],
							"path": [
								"role",
								"{{ID}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get all roles",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"email\": \"nathan@nathan.com\",\n\t\"password\": \"1234\",\n\t\"first_name\": \"Nathan\",\n\t\"last_name\": \"Russo\",\n\t\"phone_number\": \"2234449955\",\n\t\"date_of_birth\": \"1990-01-01\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/roles",
							"host": [
								"{{URL}}"
							],
							"path": [
								"roles"
							]
						}
					},
					"response": []
				},
				{
					"name": "Modified role",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"Gerente 4\",\n\t\"cannonical_name\": \"gerente1\",\n\t\"description\": \"Descripcion 12\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/role/{{ID}}",
							"host": [
								"{{URL}}"
							],
							"path": [
								"role",
								"{{ID}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete role",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{URL}}/role/{{ID}}",
							"host": [
								"{{URL}}"
							],
							"path": [
								"role",
								"{{ID}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Action",
			"item": [
				{
					"name": "Add action",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "932b38bd-faba-4696-b28e-a52831073457",
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"Response has token\"] = _.has(jsonData.data, 'access_token');",
									"tests[\"Response has email\"] = _.has(jsonData.data, 'email');",
									"",
									"pm.globals.set(\"ACTION_ID\", jsonData.data.id);"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"test_action\",\n\t\"refer_action\": \"/test/<int:id>\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/action",
							"host": [
								"{{URL}}"
							],
							"path": [
								"action"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get action by id",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"email\": \"nathan@nathan.com\",\n\t\"password\": \"1234\",\n\t\"first_name\": \"Nathan\",\n\t\"last_name\": \"Russo\",\n\t\"phone_number\": \"2234449955\",\n\t\"date_of_birth\": \"1990-01-01\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/action/{{ACTION_ID}}",
							"host": [
								"{{URL}}"
							],
							"path": [
								"action",
								"{{ACTION_ID}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get all actions",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"email\": \"nathan@nathan.com\",\n\t\"password\": \"1234\",\n\t\"first_name\": \"Nathan\",\n\t\"last_name\": \"Russo\",\n\t\"phone_number\": \"2234449955\",\n\t\"date_of_birth\": \"1990-01-01\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/actions",
							"host": [
								"{{URL}}"
							],
							"path": [
								"actions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Modified action",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"_test_action\",\n\t\"refer_action\": \"/test/<int:id>\"\n}\n"
						},
						"url": {
							"raw": "{{URL}}/action/{{ACTION_ID}}",
							"host": [
								"{{URL}}"
							],
							"path": [
								"action",
								"{{ACTION_ID}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete action",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{UserToken}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{URL}}/action/{{ACTION_ID}}",
							"host": [
								"{{URL}}"
							],
							"path": [
								"action",
								"{{ACTION_ID}}"
							]
						}
					},
					"response": []
				}
			]
		}
	]
}